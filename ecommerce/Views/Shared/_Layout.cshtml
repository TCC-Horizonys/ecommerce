<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Antiquário D´Ouro</title>
    <link rel="icon" href="~/img/antiquariologo.png" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Virtus.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    @RenderSection("Styles", required: false)
</head>
<body>

    <script>
                // Função para salvar o carrinho no cookie
        function salvarCarrinho(carrinho) {

            let carrinhoStr = btoa(JSON.stringify(carrinho));

            let data = new Date();
            data.setDate(data.getDate() + 365);
            let expiracao = data.toUTCString();

            document.cookie = "shopping_cart=" + carrinhoStr + ";expires=" + expiracao + ";path=/; SameSite=Strict; Secure";
        }

        // Função para adicionar um produto ao carrinho
        function adicionarAoCarrinho(botao, id) {
            let carrinho = obterCarrinhoDeCompras();

            let quantidade = carrinho[id];
            if (isNaN(quantidade)) {
                carrinho[id] = 1;
            } else {
                carrinho[id] = Number(quantidade) + 1;
            }

            salvarCarrinho(carrinho);

            botao.innerHTML = "Adicionado <i class='bi bi-check-lg'></i>";

            let tamanhoCarrinho = 0;
            for (var item of Object.entries(carrinho)) {
                quantidade = item[1];
                if (isNaN(quantidade)) continue;
                tamanhoCarrinho += Number(quantidade);
            }

            document.getElementById("CartSize").innerHTML = tamanhoCarrinho;
        }

        // Função para aumentar a quantidade de um item no carrinho
        function aumentar(id) {
            let carrinho = obterCarrinhoDeCompras();

            let quantidade = carrinho[id];
            if (isNaN(quantidade)) {
                carrinho[id] = 1;
            } else {
                carrinho[id] = Number(quantidade) + 1;
            }

            salvarCarrinho(carrinho);
            location.reload();
        }

        // Função para diminuir a quantidade de um item no carrinho
        function diminuir(id) {
            let carrinho = obterCarrinhoDeCompras();

            let quantidade = carrinho[id];
            if (isNaN(quantidade)) {
                return;
            }

            quantidade = Number(quantidade);

            if (quantidade > 1) {
                carrinho[id] = quantidade - 1;
                salvarCarrinho(carrinho);
                location.reload();
            }
        }

        // Função para remover um item do carrinho
        function remover(id) {
            let carrinho = obterCarrinhoDeCompras();

            if (carrinho[id]) {
                delete carrinho[id];
                salvarCarrinho(carrinho);
                location.reload();
            }
        }

        // Função auxiliar para obter o carrinho a partir do cookie
        function obterCarrinhoDeCompras() {
            const nomeCookie = "shopping_cart";
            let cookies = document.cookie.split(';');

            for (let i = 0; i < cookies.length; i++) {
                let cookie = cookies[i].trim();
                if (cookie.startsWith(nomeCookie + "=")) {
                    let valor = cookie.substring(cookie.indexOf("=") + 1);
                    try {
                        let carrinho = JSON.parse(atob(valor));
                        return carrinho;
                    } catch (erro) {
                        break;
                    }
                }
            }

            return {};
        }

    </script>
@* === HEADER / NAV === *@
<header>
    <style>
        /* Paleta e tipografia (use uma serif elegante caso não tenha a fonte do logotipo) */
        :root {
            --bg-parchment: #F5EFE1; /* bege claro do print */
            --ink: #111;            /* quase preto */
            --muted-ink: #4A4A4A;
        }
        .antq-header { background: var(--bg-parchment); }
        .antq-topbar { background: var(--bg-parchment); border-bottom: 1px solid rgba(0,0,0,.08); }
        .antq-topbar .brand { font-family: "Cinzel", "Cormorant Garamond", Georgia, serif; letter-spacing: .15rem; font-size: clamp(18px, 2.2vw, 30px); color: var(--ink); text-transform: uppercase; text-decoration: none; }
        .antq-subtitle { font-size: .75rem; letter-spacing: .45rem; color: var(--ink); opacity: .9; text-transform: uppercase; margin-top: -6px; }
        .antq-icons img { height: 22px; }
        .antq-icons .nav-link { position: relative; padding: .25rem .25rem .25rem .5rem; }
        .antq-badge { position: absolute; top: -4px; right: -8px; background:#fff; color:#000; border-radius: 999px; font-size:.65rem; padding: 0 .3rem; border: 1px solid rgba(0,0,0,.15); }

        /* Barra de categorias */
        .antq-cats { background: var(--bg-parchment); }
        .antq-cats .nav { gap: 3rem; }
        .antq-cats .nav-link {color: #000000;}
                .antq-cats .nav-link:hover {
                    background: #000000;
                    color: inherit;
                    border-radius: 0;
                }

                .antq-cats .nav-link:hover {
                    color: #ffffff;
                }
        /* Aba ativa (como o retângulo preto no print) */
        .antq-cats .nav-link.active { background: #0A0A0A; color: #fff; padding: .6rem 1.5rem; border-radius: 0; }

        /* Utilidades */
        .antq-center { display: flex; align-items: center; justify-content: center; }
        .antq-spread { display:flex; align-items:center; justify-content:space-between; }
        .antq-container { max-width: 1100px; margin-inline: auto; padding-inline: 16px; }

        media (max-width: 768px) {
            .antq-cats .nav { gap: 1.2rem; flex-wrap: wrap; justify-content:center; }
            .antq-subtitle { letter-spacing: .35rem; }
        }
    </style>

    <!-- Linha superior: logo no centro + ícones à direita -->
    <div class="antq-topbar py-2">
        <div class="antq-container antq-spread">
            <div style="width: 80px"></div> <!-- placeholder para equilibrar o centro -->

            <a class="brand text-decoration-none text-center" asp-area="" asp-controller="Home" asp-action="Index">
                    <img src="~/img/logopreta.png" width="300">
            </a>

            <ul class="nav antq-icons">
                <li class="nav-item me-3">
                    <a class="nav-link" asp-area="" asp-controller="Carrinho" asp-action="Index">
                        <img src="~/img/caricon.png" alt="Carrinho"/>
                        <span id="CartSize" class="antq-badge">0</span>
                    </a>
                </li>

                    @{
                        var nome = Context.Session.GetString("UsuarioNome");
                        var sobrenome = Context.Session.GetString("UsuarioSobrenome");
                        var tipo = Context.Session.GetString("UsuarioTipo"); // "admin" ou "user"
                        bool logado = !string.IsNullOrEmpty(nome);
                        bool isAdmin = string.Equals(tipo, "admin", StringComparison.OrdinalIgnoreCase);
                    }
                    <li class="nav-item">
                        @if (!logado)
                        {
                            <!-- Não logado: clica e vai para Login (sem dropdown) -->
                            <a class="nav-link" asp-controller="Usuario" asp-action="Login" title="Entrar">
                                <img src="~/img/usericon.png" height="24" alt="Usuário" />
                            </a>
                        }
                        else
                        {
                            <!-- Logado: ícone abre dropdown com itens diferentes p/ Admin x Usuário -->
                            <a class="nav-link dropdown-toggle no-caret" href="#" role="button"
                               data-bs-toggle="dropdown" aria-expanded="false" title="Minha conta">
                                <img src="~/img/usericon.png" height="24" alt="Usuário" />
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <span class="dropdown-item-text">
                                        Olá @nome@(isAdmin ? " (Admin)" : "")!
                                    </span>
                                </li>
                                <li><hr class="dropdown-divider" /></li>

                                @if (isAdmin)
                                {
                                    <li><a class="dropdown-item" asp-controller="Produto" asp-action="Index">Produtos</a></li>
                                    <li><a class="dropdown-item" asp-controller="AdminPedido" asp-action="Index">Pedidos</a></li>
                                }
                                else
                                {
                                    <li><a class="dropdown-item" asp-controller="UsuarioPedido" asp-action="Index">Meus Pedidos</a></li>
                                }

                                <li><a class="dropdown-item" asp-controller="Usuario" asp-action="Perfil">Perfil</a></li>
                                <li><hr class="dropdown-divider" /></li>
                                <li><a class="dropdown-item" asp-controller="Usuario" asp-action="Logout">Sair</a></li>
                            </ul>
                        }
                    </li>

            </ul>
        </div>
    </div>

    <!-- Linha inferior: categorias -->
    <nav class="antq-cats">
        <div class="antq-container antq-center ">

                <ul class="navbar-nav mx-auto flex-row gap-4">
                    <!-- <- adicione flex-row -->
                    <li class="nav-item"><a class="nav-link px-3" href="#roupas">ROUPAS</a></li>
                    <li class="nav-item"><a class="nav-link px-3" href="#arte">ARTE</a></li>
                    <li class="nav-item"><a class="nav-link px-3" href="#moveis">MÓVEIS</a></li>
                    <li class="nav-item"><a class="nav-link px-3" href="#joias">JÓIAS</a></li>
                </ul>

        </div>
    </nav>
</header>



    @if (ViewData["PagInicial"] == null)
    {
        <div class="container mt-3">
            <main role="main" class="pb-3">
                @RenderBody()
            </main>
        </div>
    }
    else
    {
        @RenderBody()
    }

    <footer class="footer">
        <style>
            /* Cores base do rodapé */
            .footer, .footer-bottom {
                background-color: #856045;
                color: #000;
            }

            .footer {
                padding: 24px 16px;
            }

                .footer a {
                    color: inherit;
                    text-decoration: none;
                }

            /* Linha dos ícones sociais (usa o seu id #redes) */
            #redes {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 18px; /* espaçamento entre os ícones */
                margin-bottom: 16px;
            }

                #redes img {
                    width: 50px;
                    height: 50px;
                    display: block;
                }

            /* Bloco de contato (usa o seu id #cont) */
            #cont {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 12px; /* espaço vertical entre as linhas */
                margin-bottom: 18px;
            }
            /* Cada linha: ícone + texto ao lado */
            .contact-line {
                display: flex;
                align-items: center;
                gap: 10px; /* espaço entre ícone e texto */
            }

                .contact-line img {
                    width: 28px;
                    height: 28px;
                    flex: 0 0 auto;
                }

                .contact-line p {
                    margin: 0;
                }

            .footer-bottom {
                text-align: center;
                padding: 12px 0;
                font-size: .95rem;
            }
        </style>

        <!-- Ícones sociais -->
        <div id="redes">
            <a href="https://wa.me/55XXXXXXXXXX" target="_blank" aria-label="WhatsApp"><img src="~/img/whatsapp.png" alt="WhatsApp" /></a>
            <a href="https://www.instagram.com/horizonys_/" target="_blank" aria-label="Instagram"><img src="~/img/instagram.png" alt="Instagram" /></a>
            <a href="https://www.linkedin.com/in/horizonys-enterprise-80244a358/" target="_blank" aria-label="LinkedIn"><img src="~/img/linkedin.png" alt="LinkedIn" /></a>
        </div>

        <!-- Contatos: ícone + texto ao lado -->
        <div id="cont">
            <div class="contact-line">
                <img src="~/img/email.png" alt="E-mail" />
                <p><a href="mailto:horizonys08@gmail.com">horizonys08@gmail.com</a></p>
            </div>
            <div class="contact-line">
                <img src="~/img/pin.png" alt="Endereço" />
                <p>Av. Brigadeiro Faria Lima, 3600</p>
            </div>
        </div>

        <div class="footer-bottom">
            &copy; 2025 Horizonys. Todos os direitos reservados.
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>
