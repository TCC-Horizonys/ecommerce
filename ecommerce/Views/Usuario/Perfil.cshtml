@model Perfil
@using ecommerce.Services;
@{
    ViewData["Title"] = "Perfil";
}

<section class="pfp-wrap">
  <h3 class="pfp-title">Meu Perfil</h3>

  <div class="pfp-card">
    <div class="pfp-grid">
      <div class="pfp-col">
        <div class="pfp-row"><span class="pfp-key">Nome :</span> <span class="pfp-val">@Model.Nome</span></div>
        <div class="pfp-row"><span class="pfp-key">Data Nascimento :</span> <span class="pfp-val">@Model.DataNasc</span></div>
        <div class="pfp-row"><span class="pfp-key">Email :</span> <span class="pfp-val">@Model.Email</span></div>
      </div>

      <div class="pfp-col">
        <div class="pfp-row"><span class="pfp-key">Telefone :</span> <span class="pfp-val">@Model.Telefone.FormatarTelefone()</span></div>
        <div class="pfp-row"><span class="pfp-key">CPF :</span> <span class="pfp-val">@Model.CPF.FormatarCPF()</span></div>
        <div class="pfp-row"><span class="pfp-key">Tipo :</span> <span class="pfp-val text-capitalize">@Model.Tipo</span></div>
      </div>

      <div class="pfp-actions">
        <button type="button" class="btn-main" data-bs-toggle="modal" data-bs-target="#EditarPerfil">
          Editar Informações
        </button>
        <a class="btn-main ghost" asp-controller="UsuarioPedido" asp-action="Index">Meus pedidos</a>
      </div>
    </div>
  </div>
</section>

@* --- Modal de Edição (mantido) --- *@
<div class="modal fade" id="EditarPerfil" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5">Editar Perfil</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form asp-action="Perfil" method="post" id="perfilForm">
          <input type="hidden" asp-for="Id" />

          <div class="mb-2">
            <label class="form-label">Nome</label>
            <input class="form-control" asp-for="Nome" />
            <span asp-validation-for="Nome" class="text-danger"></span>
          </div>

          <div class="mb-2">
            <label class="form-label">Data de Nascimento</label>
            <input class="form-control" asp-for="DataNasc" placeholder="yyyy/mm/dd" />
            <span asp-validation-for="DataNasc" class="text-danger"></span>
          </div>

          <div class="mb-2">
            <label class="form-label">Email</label>
            <input class="form-control" asp-for="Email" />
            <span asp-validation-for="Email" class="text-danger"></span>
          </div>

          <div class="mb-2">
            <label class="form-label">Telefone</label>
            <input class="form-control" id="Telefone" asp-for="Telefone" />
            <span asp-validation-for="Telefone" class="text-danger"></span>
          </div>

          <div class="mb-2">
            <label class="form-label">CPF</label>
            <input class="form-control" id="CPF" asp-for="CPF" />
            <span asp-validation-for="CPF" class="text-danger"></span>
          </div>

          <div class="mt-3">
            <button type="submit" class="btn btn-primary">Salvar</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

@section Styles{
<style>
  :root{
    --bg-parchment:#F3EDE1;   /* fundo da página */
    --card:#F1E8D7;           /* cartão */
    --ink:#1b1b1b;
    --accent:#8a5f43;         /* marrom */
    --radius:14px;
    --shadow:0 8px 18px rgba(0,0,0,.12);
  }
  .pfp-wrap{ background:var(--bg-parchment); padding:16px 10px 28px; }
  .pfp-title{
    max-width:900px; margin:0 auto 8px;
    font-family:"Cinzel","Cormorant Garamond",serif; letter-spacing:.06rem; color:var(--ink);
  }
  .pfp-card{
    max-width:900px; margin:0 auto; background:var(--card);
    border:1px solid rgba(0,0,0,.12); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:14px 18px;
  }
  .pfp-grid{ display:grid; grid-template-columns: 1fr 1fr auto; gap:8px 28px; align-items:start; }
  media (max-width: 900px){ .pfp-grid{ grid-template-columns: 1fr; } }

        .pfp-col {
            /* antes: display:flex; flex-direction:column; ... */
            display: block;
        }

        .pfp-row {
            /* mantém cada par “título : valor” grudadinho */
            display: grid;
            grid-template-columns: auto 1fr; /* título + valor */
            column-gap: 10px; /* espaço só entre os dois */
            align-items: baseline;
            margin-bottom: 6px;
        }

        .pfp-key {
            /* antes tinha min-width: 180px; */
            min-width: unset;
            margin-right: 0;
            white-space: nowrap; /* não quebra “DATA NASCIMENTO :” */
        }

        .pfp-val {
            white-space: nowrap; /* evita quebrar o valor */
        }

  .pfp-actions{
    display:flex; flex-direction:column; gap:12px; justify-self:end; align-self:center;
  }
  .btn-main{
    background:var(--accent); color:#fff; border:none; border-radius:10px;
    padding:8px 16px; text-decoration:none; text-align:center;
    font-family:"Cinzel","Cormorant Garamond",serif; letter-spacing:.06rem;
    box-shadow:0 4px 10px rgba(0,0,0,.12); cursor:pointer;
  }
  .btn-main.ghost{ background:var(--accent); opacity:.95; }

  .btn-main.ghost:hover {
                    transform: translateY(-1px);
                    color: white;
  }

            .btn-main:hover {
                transform: translateY(-1px);
                color: white;
            }
</style>
}

@section Scripts{
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
  $(function(){
    $('#Telefone').mask('(00)00000-0000');
    $('#CPF').mask('000.000.000-00');
    $('#perfilForm').on('submit', function () {
      $('#Telefone').val($('#Telefone').val().replace(/\D/g, ''));
      $('#CPF').val($('#CPF').val().replace(/\D/g, ''));
    });
  });
</script>
}
